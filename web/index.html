<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Synthetic Calendar Generator</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/vis-timeline@9.5.1/styles/vis-timeline-graph2d.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>Synthetic Calendar Generator</h1>
      <p>
        Experiment with character configurations and explore their synthetic schedules
        with rich visualisations. All processing happens locally in your browser, so
        you can deploy this page to Netlify as a static site.
      </p>
    </header>

    <main class="page-layout">
      <section class="card form-card">
        <h2>Configuration</h2>
        <form id="config-form">
          <div class="form-row">
            <label for="start-date">Week starting (optional)</label>
            <input id="start-date" name="start-date" type="date" />
            <p class="help-text">
              Leave blank to start on the current week&#8217;s Monday.
            </p>
          </div>
          <div class="form-row">
            <label for="config-input">Configuration JSON</label>
            <textarea
              id="config-input"
              name="config-input"
              spellcheck="false"
              rows="20"
            ></textarea>
            <p class="help-text">
              Provide the same JSON structure used by <code>calendar_gen.py</code>.
            </p>
          </div>
          <div class="form-actions">
            <button type="submit">Generate schedule</button>
            <button type="button" id="download-json" disabled>Download JSON</button>
          </div>
          <p class="form-error" id="form-error" role="alert"></p>
        </form>
      </section>

      <section class="card hidden results-card" id="results">
        <div class="results-header">
          <h2>Generated schedule</h2>
          <div class="results-controls">
            <button
              type="button"
              id="toggle-config"
              class="toggle-config-button"
              hidden
              aria-expanded="false"
            >
              Show configuration
            </button>
            <div class="view-switcher" role="tablist">
              <button type="button" class="view-tab active" data-view="overview" role="tab">
                Overview
              </button>
              <button type="button" class="view-tab" data-view="day" role="tab">Day</button>
              <button type="button" class="view-tab" data-view="week" role="tab">Week</button>
              <button type="button" class="view-tab" data-view="month" role="tab">Month</button>
              <button type="button" class="view-tab" data-view="year" role="tab">Year</button>
            </div>
            <div
              class="display-mode-switcher"
              id="display-mode-switcher"
              role="group"
              aria-label="Display granularity"
            >
              <button
                type="button"
                class="display-mode-button active"
                data-display-mode="minute"
              >
                Minute view
              </button>
              <button
                type="button"
                class="display-mode-button"
                data-display-mode="grid-15"
              >
                15 min grid
              </button>
            </div>
          </div>
        </div>

        <div class="view-panels">
          <section class="view-panel active" data-view="overview" role="tabpanel">
            <div class="totals" id="totals"></div>
            <div class="overview-grid">
              <div>
                <h3>Weekly timeline</h3>
                <div class="timeline" id="timeline"></div>
              </div>
              <div>
                <h3>Event list</h3>
                <div class="event-table" id="event-table"></div>
              </div>
            </div>
            <details>
              <summary>Raw JSON output</summary>
              <pre id="json-output"></pre>
            </details>
          </section>

          <section class="view-panel" data-view="day" role="tabpanel" aria-label="Day view">
            <div class="day-view-header">
              <label for="day-selector">Focus day</label>
              <div class="day-selector" id="day-selector"></div>
            </div>
            <div class="day-view" id="day-view"></div>
          </section>

          <section class="view-panel" data-view="week" role="tabpanel" aria-label="Week view">
            <div class="week-view" id="week-view"></div>
          </section>

          <section class="view-panel" data-view="month" role="tabpanel" aria-label="Month view">
            <div class="month-view" id="month-view"></div>
          </section>

          <section class="view-panel" data-view="year" role="tabpanel" aria-label="Year view">
            <div class="year-view" id="year-view"></div>
          </section>
        </div>
      </section>
    </main>

    <footer class="page-footer">
      <p>
        Built for the Synthetic Calendar Generator MVP. View the
        <a href="../calendar_gen.py">Python implementation</a> for CLI usage.
      </p>
    </footer>

    <template id="event-row-template">
      <div class="event-row">
        <div class="event-time"></div>
        <div class="event-activity"></div>
        <div class="event-duration"></div>
      </div>
    </template>
    <script src="https://unpkg.com/vis-timeline@9.5.1/standalone/umd/vis-timeline-graph2d.min.js"></script>
    <script src="app.js" type="module"></script>
  </body>
</html>
