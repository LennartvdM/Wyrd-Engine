<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Synthetic Calendar Generator</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>Synthetic Calendar Generator</h1>
      <p>
        Generate weekly schedules from configuration JSON and explore the results in
        a familiar calendar interface powered by FullCalendar.
      </p>
    </header>

    <main class="page-layout">
      <section class="card form-card">
        <h2>Configuration</h2>
        <form id="config-form" novalidate>
          <div class="form-row">
            <label for="start-date">Week starting (optional)</label>
            <input id="start-date" name="start-date" type="date" />
            <p class="help-text">Leave blank to start on the current week&#8217;s Monday.</p>
          </div>
          <div class="form-row">
            <label for="config-input">Configuration JSON</label>
            <textarea
              id="config-input"
              name="config-input"
              spellcheck="false"
              rows="20"
            ></textarea>
            <p class="help-text">
              Provide the same JSON structure used by <code>calendar_gen.py</code>.
            </p>
          </div>
          <div class="form-actions">
            <button type="submit">Generate schedule</button>
          </div>
          <p class="form-error" id="form-error" role="alert"></p>
        </form>
      </section>

      <section class="card hidden results-card" id="results">
        <div class="results-header">
          <div>
            <h2 id="results-title">Generated schedule</h2>
            <p id="results-subtitle"></p>
          </div>
          <button type="button" id="download-json" disabled>Download JSON</button>
        </div>
        <div class="results-body">
          <aside class="summary">
            <h3>Weekly totals</h3>
            <div class="totals" id="totals"></div>
          </aside>
          <div class="calendar-wrapper">
            <div class="calendar-warning hidden" id="calendar-warning">
              FullCalendar failed to load. Check your network connection and reload the page.
            </div>
            <div id="calendar"></div>
          </div>
        </div>
        <details class="raw-json">
          <summary>Raw JSON output</summary>
          <pre id="json-output"></pre>
        </details>
      </section>
    </main>

    <footer class="page-footer">
      <p>
        Built for the Synthetic Calendar Generator MVP. View the
        <a href="../calendar_gen.py">Python implementation</a> for CLI usage.
      </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <script src="app.js" type="module"></script>
  </body>
</html>
